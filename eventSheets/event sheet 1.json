{
	"name": "Event sheet 1",
	"events": [
		{
			"eventType": "variable",
			"name": "playerStartedMoving",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 728268904738969
		},
		{
			"eventType": "variable",
			"name": "circleGrowRate",
			"type": "number",
			"initialValue": "10",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 465627950951279
		},
		{
			"eventType": "variable",
			"name": "circleDelay",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 679782526255859
		},
		{
			"eventType": "variable",
			"name": "clearCircleReset",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 118423457335738
		},
		{
			"eventType": "variable",
			"name": "initialEnergyBarHeight",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 128007228053825
		},
		{
			"eventType": "variable",
			"name": "memoryClearOpacity",
			"type": "number",
			"initialValue": "50",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 428707775501388
		},
		{
			"eventType": "variable",
			"name": "energy",
			"type": "number",
			"initialValue": "100",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 188143353194206
		},
		{
			"eventType": "variable",
			"name": "energyRate",
			"type": "number",
			"initialValue": "0.2",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 315546352112931
		},
		{
			"eventType": "variable",
			"name": "scaleChange",
			"type": "number",
			"initialValue": "0.005",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 856421541490253
		},
		{
			"eventType": "variable",
			"name": "memoryClearOpacityRate",
			"type": "number",
			"initialValue": "2",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 961814479776837
		},
		{
			"eventType": "variable",
			"name": "specialBuildings",
			"type": "number",
			"initialValue": "8",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 495854041572848
		},
		{
			"eventType": "variable",
			"name": "specialBuildingsCounter",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 373422730895566
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Debug",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Quick exit from preview"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 666987436843379,
							"parameters": {
								"key": 27
							}
						}
					],
					"actions": [
						{
							"id": "close",
							"objectClass": "Browser",
							"sid": 788362487256930
						}
					],
					"sid": 669667710908447
				},
				{
					"eventType": "comment",
					"text": "Change layout Scale"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 264795678623298,
							"parameters": {
								"key": 189
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 260742518051941,
							"parameters": {
								"scale": "LayoutScale-scaleChange"
							}
						}
					],
					"sid": 728915769629871
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 120591583247743,
							"parameters": {
								"key": 187
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 584385888554165,
							"parameters": {
								"scale": "LayoutScale+scaleChange"
							}
						}
					],
					"sid": 172694512183862
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 178027003644646,
							"parameters": {
								"key": 48
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 154051458431978,
							"parameters": {
								"scale": "1.0"
							}
						}
					],
					"sid": 775563661302466
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 146425856174823,
							"parameters": {
								"key": 57
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 501238552054535,
							"parameters": {
								"scale": "0.25"
							}
						}
					],
					"sid": 248681850408742
				}
			],
			"sid": 640762880251818
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 502166315277921
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 950460006796465,
					"parameters": {
						"variable": "initialEnergyBarHeight",
						"value": "energyBar.Height"
					}
				},
				{
					"id": "destroy",
					"objectClass": "memoryClear",
					"sid": 894292366299457
				},
				{
					"id": "set-animation-frame",
					"objectClass": "buildings",
					"sid": 397961824184738,
					"parameters": {
						"frame-number": "random(buildings.AnimationFrameCount)"
					}
				},
				{
					"id": "set-animation-frame",
					"objectClass": "roads",
					"sid": 817671226807283,
					"parameters": {
						"frame-number": "random(roads.AnimationFrameCount)"
					}
				},
				{
					"id": "set-animation-frame",
					"objectClass": "junctions",
					"sid": 844487765465839,
					"parameters": {
						"frame-number": "random(junctions.AnimationFrameCount)"
					}
				}
			],
			"sid": 891339305556636,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-random-instance",
							"objectClass": "System",
							"sid": 491275419310907,
							"parameters": {
								"object": "startPoint"
							}
						}
					],
					"actions": [
						{
							"id": "set-position-to-another-object",
							"objectClass": "player",
							"sid": 447068366968765,
							"parameters": {
								"object": "startPoint",
								"image-point-optional": "1"
							}
						}
					],
					"sid": 599310969281352
				}
			]
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Functions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-function",
							"objectClass": "Function",
							"sid": 436190149351012,
							"parameters": {
								"name": "\"startClearCircle\""
							}
						}
					],
					"actions": [
						{
							"id": "set-position-to-another-object",
							"objectClass": "clearCircle",
							"sid": 387243617421627,
							"parameters": {
								"object": "player",
								"image-point-optional": "0"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "clearCircle",
							"sid": 750900584883389,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 508734136236596,
							"parameters": {
								"variable": "clearCircleReset",
								"value": "true"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "clearCircle",
							"sid": 489168581311396,
							"parameters": {
								"opacity": "100"
							}
						},
						{
							"id": "set-size",
							"objectClass": "clearCircle",
							"sid": 322051725198258,
							"parameters": {
								"width": "player.Width",
								"height": "player.Height"
							}
						}
					],
					"sid": 143236583477731
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-function",
							"objectClass": "Function",
							"sid": 699658933342303,
							"parameters": {
								"name": "\"endClearCircle\""
							}
						}
					],
					"actions": [
						{
							"id": "restart-fade",
							"objectClass": "clearCircle",
							"sid": 212856701699841,
							"behaviorType": "Fade"
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 360932673209767,
							"parameters": {
								"variable": "clearCircleReset",
								"value": "false"
							}
						},
						{
							"id": "spawn-another-object",
							"objectClass": "clearCircle",
							"sid": 627899281309073,
							"parameters": {
								"object": "memoryClear",
								"layer": "\"memory\"",
								"image-point": "0"
							}
						},
						{
							"id": "set-size",
							"objectClass": "memoryClear",
							"sid": 942199340921481,
							"parameters": {
								"width": "clearCircle.Width",
								"height": "clearCircle.Height"
							}
						}
					],
					"sid": 559732367513763
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-fade-out-finished",
							"objectClass": "clearCircle",
							"sid": 592195641848507,
							"behaviorType": "Fade"
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "clearCircle",
							"sid": 185952109234965,
							"parameters": {
								"x": "-1000",
								"y": "-1000"
							}
						}
					],
					"sid": 261645435834358
				}
			],
			"sid": 379227187891659
		},
		{
			"eventType": "comment",
			"text": "Memory clear doesn't start at beginning."
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "MemoryCircle",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-opacity",
							"objectClass": "memoryClear",
							"sid": 802631864627149,
							"parameters": {
								"comparison": 2,
								"opacity": "memoryClearOpacity"
							}
						}
					],
					"actions": [
						{
							"id": "set-opacity",
							"objectClass": "memoryClear",
							"sid": 260206259137911,
							"parameters": {
								"opacity": "memoryClear.Opacity+memoryClearOpacityRate"
							}
						}
					],
					"sid": 306404434566273
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving",
							"objectClass": "player",
							"sid": 246228438635513,
							"behaviorType": "8Direction"
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 570894572584023,
							"parameters": {
								"variable": "playerStartedMoving",
								"value": "true"
							}
						}
					],
					"sid": 602178009143478,
					"children": [
						{
							"eventType": "comment",
							"text": "If circle is growing, stop it growing"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 950284456818074,
									"parameters": {
										"variable": "clearCircleReset"
									}
								}
							],
							"actions": [
								{
									"id": "call-function",
									"objectClass": "Function",
									"sid": 985984947854017,
									"parameters": {
										"name": "\"endClearCircle\"",
										"parameter-n": []
									}
								}
							],
							"sid": 376902531630672
						},
						{
							"eventType": "comment",
							"text": "If waiting for growth timer to kick in, stop the timer"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-timer-running",
									"objectClass": "player",
									"sid": 405948784797415,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"startCircle\""
									}
								}
							],
							"actions": [
								{
									"id": "stop-timer",
									"objectClass": "player",
									"sid": 119413474503830,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"startCircle\""
									}
								}
							],
							"sid": 358290325222306
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Start timer to kick of circle growth"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving",
							"objectClass": "player",
							"sid": 713660368941640,
							"behaviorType": "8Direction",
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 168922482521640,
							"parameters": {
								"variable": "playerStartedMoving"
							}
						},
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 192303357114101
						}
					],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "player",
							"sid": 294319916338801,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "circleDelay",
								"type": "once",
								"tag": "\"startCircle\""
							}
						}
					],
					"sid": 686224818391446
				},
				{
					"eventType": "comment",
					"text": "If player has stood still for a time, then begin circle growth"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "player",
							"sid": 702857236612452,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"startCircle\""
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 602792650934313,
							"parameters": {
								"variable": "energy",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [],
					"sid": 803200014332881,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 881281083947956,
									"parameters": {
										"variable": "clearCircleReset"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "call-function",
									"objectClass": "Function",
									"sid": 282886031229013,
									"parameters": {
										"name": "\"startClearCircle\"",
										"parameter-n": []
									}
								}
							],
							"sid": 251383413949265
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Whilst player is stood still and circle growth has kicked in, and you still have energy, grow the circle"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 837812311817509,
							"parameters": {
								"variable": "clearCircleReset"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 940583046149840,
							"parameters": {
								"variable": "energy",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-size",
							"objectClass": "clearCircle",
							"sid": 752749466342831,
							"parameters": {
								"width": "clearCircle.Width+circleGrowRate",
								"height": "clearCircle.Height+circleGrowRate"
							}
						},
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 222120806964654,
							"parameters": {
								"variable": "energy",
								"value": "energyRate"
							}
						},
						{
							"id": "set-height",
							"objectClass": "energyBar",
							"sid": 505156522812261,
							"parameters": {
								"height": "(initialEnergyBarHeight/100)*energy"
							}
						}
					],
					"sid": 592546644985928
				}
			],
			"sid": 521654272012787
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "CollectMemories",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Choose 8 buildings to be special"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 204737262134627
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 193656913760448,
							"parameters": {
								"variable": "specialBuildingsCounter",
								"value": "specialBuildings"
							}
						}
					],
					"sid": 895026930128439,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "while",
									"objectClass": "System",
									"sid": 436573994174291
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 791621496234162,
									"parameters": {
										"first-value": "specialBuildingsCounter",
										"comparison": 4,
										"second-value": "0"
									}
								}
							],
							"actions": [],
							"sid": 536926058420589,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-random-instance",
											"objectClass": "System",
											"sid": 768540379674840,
											"parameters": {
												"object": "buildings"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "buildings",
											"sid": 491182733784845,
											"parameters": {
												"instance-variable": "special"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "buildings",
											"sid": 963555700560606,
											"parameters": {
												"instance-variable": "special",
												"value": "true"
											}
										},
										{
											"id": "subtract-from-eventvar",
											"objectClass": "System",
											"sid": 985511408584043,
											"parameters": {
												"variable": "specialBuildingsCounter",
												"value": "1"
											}
										}
									],
									"sid": 786423048959439
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "buildings",
							"sid": 311752015729055,
							"parameters": {
								"instance-variable": "special"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "buildings",
							"sid": 432000516975651,
							"parameters": {
								"animation": "\"Selected\"",
								"from": "beginning"
							}
						}
					],
					"sid": 710487888504724
				}
			],
			"sid": 882351859350029
		}
	],
	"sid": 164693033357527
}